import{d as Z,r as V,k as ee,a as f,o as d,b as t,u as e,g as te,w as l,e as o,f as r,F as x,j as T,s as h,t as i,h as F,S as se,W as w}from"./app-DOxiRVIA.js";import{_ as le}from"./AppLayout.vue_vue_type_script_setup_true_lang-WYbEajpJ.js";import{_ as v}from"./index-DUHd3xqt.js";import{_ as ae,a as D,b as re,c as u}from"./TableRow.vue_vue_type_script_setup_true_lang-CsPTr5ja.js";import{_ as ne,a as _}from"./TableHeader.vue_vue_type_script_setup_true_lang-IJLq94L7.js";import{_ as j}from"./index-_f9MyVBi.js";import{_ as P,a as Q,b as W,c as q}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-sNhpxKJH.js";import{_ as L,a as z,b as B,c as E,d as p}from"./SelectValue.vue_vue_type_script_setup_true_lang-BM6tlqva.js";import{_ as oe}from"./Input.vue_vue_type_script_setup_true_lang-Cq_l8LRK.js";import{_ as G}from"./Label.vue_vue_type_script_setup_true_lang-D3ybJY9q.js";import{u as ie}from"./useSmartPagination-Bz9TNaKS.js";import{S as de,C as ue}from"./search-BOIz5PWB.js";import{E as O}from"./eye--g_tvJCP.js";import{C as me}from"./chevron-left-Cw97Vjrb.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-S87O08LM.js";import"./createLucideIcon-BjYozdgk.js";import"./useForwardExpose-B_zO9qyG.js";import"./useForwardPropsEmits-BeNjkoCW.js";import"./useFocusGuards-BySI5XQd.js";import"./DialogPortal-DRmpYFSE.js";import"./VisuallyHidden-CIKPNANY.js";import"./x-CWx9OcX4.js";import"./shopping-cart-Bwqd3RzO.js";import"./Sonner.vue_vue_type_script_setup_true_lang-lYdWObfB.js";import"./vue-sonner-C5tI8-Hn.js";import"./Collection-CCl91v5X.js";import"./usePrimitiveElement-COdbjRAo.js";import"./RovingFocusGroup-C6hHKZD7.js";import"./check-CEKJkTEg.js";import"./useFormControl-jIqDU8YA.js";const fe={class:"container mx-auto py-6"},_e={class:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},pe={class:"flex flex-wrap items-center gap-4"},ce={class:"flex items-center gap-2"},ge={class:"flex items-center gap-2"},xe={class:"flex items-center gap-2"},ve={class:"relative w-full max-w-xs"},be={class:"overflow-hidden border-y"},ye={class:"px-3 py-4"},he={class:"font-medium"},we={class:"text-sm text-muted-foreground"},$e={class:"text-sm text-muted-foreground"},ke={class:"mt-6 flex flex-col items-center justify-between gap-4 sm:flex-row"},Ce={class:"text-sm text-muted-foreground"},Ve={class:"flex items-center gap-1"},Te={key:1,class:"px-2 text-muted-foreground"},rt=Z({__name:"Index",props:{orders:{},filters:{}},setup(R){var M,U,I,K;const c=R,$=V(((M=c.filters)==null?void 0:M.search)||""),k=V(((U=c.filters)==null?void 0:U.sort_field)||"created_at"),C=V(((I=c.filters)==null?void 0:I.sort_direction)||"desc"),g=V(((K=c.filters)==null?void 0:K.status)||"all"),S={pending:"bg-yellow-100 text-yellow-800 border-yellow-200",processing:"bg-blue-100 text-blue-800 border-blue-200",confirmed:"bg-green-100 text-green-800 border-green-200",completed:"bg-green-100 text-green-800 border-green-200",cancelled:"bg-red-100 text-red-800 border-red-200"},N={pending:"Chờ xử lý",processing:"Đang xử lý",confirmed:"Đã xác nhận",completed:"Hoàn thành",cancelled:"Đã hủy"};let b=null;const H=n=>{const s={search:$.value,sort_field:k.value,sort_direction:C.value,status:g.value==="all"?"":g.value,...n};Object.keys(s).forEach(a=>{s[a]||delete s[a]}),w.get(route("admin.orders.index"),s,{preserveState:!0,preserveScroll:!0,replace:!0,onBefore:()=>{b&&clearTimeout(b)}})};ee($,n=>{b&&clearTimeout(b),b=setTimeout(()=>{var s;n!==((s=c.filters)==null?void 0:s.search)&&H({search:n})},500)});const X=()=>{H({sort_field:k.value,sort_direction:C.value,status:g.value==="all"?"":g.value})},A=(n,s)=>{w.put(route("admin.orders.status",n),{status:s},{preserveScroll:!0,onSuccess:()=>{}})},J=n=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",minimumFractionDigits:0,maximumFractionDigits:0}).format(n),Y=ie(c.orders.links);return(n,s)=>(d(),f(x,null,[t(e(te),{title:"Quản lý đơn hàng"}),t(le,null,{default:l(()=>[o("div",fe,[s[24]||(s[24]=o("div",{class:"mb-6"},[o("h1",{class:"text-3xl font-extrabold"},"Quản lý đơn hàng")],-1)),o("div",_e,[o("div",pe,[o("div",ce,[t(e(G),null,{default:l(()=>s[6]||(s[6]=[r("Sắp xếp theo:")])),_:1,__:[6]}),t(e(L),{modelValue:k.value,"onUpdate:modelValue":s[0]||(s[0]=a=>k.value=a)},{default:l(()=>[t(e(z),{class:"w-[140px]"},{default:l(()=>[t(e(B),{placeholder:"Chọn trường"})]),_:1}),t(e(E),null,{default:l(()=>[t(e(p),{value:"created_at"},{default:l(()=>s[7]||(s[7]=[r("Mới nhất")])),_:1,__:[7]}),t(e(p),{value:"total"},{default:l(()=>s[8]||(s[8]=[r("Tổng tiền")])),_:1,__:[8]}),t(e(p),{value:"status"},{default:l(()=>s[9]||(s[9]=[r("Trạng thái")])),_:1,__:[9]})]),_:1})]),_:1},8,["modelValue"])]),o("div",ge,[t(e(L),{modelValue:C.value,"onUpdate:modelValue":s[1]||(s[1]=a=>C.value=a)},{default:l(()=>[t(e(z),{class:"w-[140px]"},{default:l(()=>[t(e(B),{placeholder:"Thứ tự"})]),_:1}),t(e(E),null,{default:l(()=>[t(e(p),{value:"asc"},{default:l(()=>s[10]||(s[10]=[r("Tăng dần")])),_:1,__:[10]}),t(e(p),{value:"desc"},{default:l(()=>s[11]||(s[11]=[r("Giảm dần")])),_:1,__:[11]})]),_:1})]),_:1},8,["modelValue"])]),o("div",xe,[t(e(G),null,{default:l(()=>s[12]||(s[12]=[r("Trạng thái:")])),_:1,__:[12]}),t(e(L),{modelValue:g.value,"onUpdate:modelValue":s[2]||(s[2]=a=>g.value=a)},{default:l(()=>[t(e(z),{class:"w-[140px]"},{default:l(()=>[t(e(B),{placeholder:"Tất cả"})]),_:1}),t(e(E),null,{default:l(()=>[t(e(p),{value:"all"},{default:l(()=>s[13]||(s[13]=[r("Tất cả")])),_:1,__:[13]}),(d(),f(x,null,T(N,(a,m)=>t(e(p),{key:m,value:m},{default:l(()=>[t(e(j),{class:h([S[m],"flex items-center gap-1.5 px-1.5 py-0.5 text-xs"])},{default:l(()=>[r(i(a),1)]),_:2},1032,["class"])]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"])]),t(e(v),{onClick:X,class:"ml-2"},{default:l(()=>s[14]||(s[14]=[r(" Áp dụng ")])),_:1,__:[14]})]),o("div",ve,[t(e(oe),{modelValue:$.value,"onUpdate:modelValue":s[3]||(s[3]=a=>$.value=a),type:"text",placeholder:"Tìm kiếm đơn hàng...",class:"pl-10"},null,8,["modelValue"]),t(e(de),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-500"})])]),o("div",be,[t(e(ae),null,{default:l(()=>[t(e(ne),null,{default:l(()=>[t(e(D),null,{default:l(()=>[t(e(_),{class:"w-[15%]"},{default:l(()=>s[15]||(s[15]=[o("div",{class:"px-3 py-4"},"Mã đơn hàng",-1)])),_:1,__:[15]}),t(e(_),{class:"w-[20%]"},{default:l(()=>s[16]||(s[16]=[r("Khách hàng")])),_:1,__:[16]}),t(e(_),{class:"w-[15%]"},{default:l(()=>s[17]||(s[17]=[r("Người đặt")])),_:1,__:[17]}),t(e(_),{class:"w-[15%]"},{default:l(()=>s[18]||(s[18]=[r("Trạng thái")])),_:1,__:[18]}),t(e(_),{class:"w-[15%] text-right"},{default:l(()=>s[19]||(s[19]=[r("Tổng tiền")])),_:1,__:[19]}),t(e(_),{class:"w-[10%]"},{default:l(()=>s[20]||(s[20]=[r("Ngày đặt")])),_:1,__:[20]}),t(e(_),{class:"w-[10%] text-right"},{default:l(()=>s[21]||(s[21]=[r("Thao tác")])),_:1,__:[21]})]),_:1})]),_:1}),t(e(re),null,{default:l(()=>[n.orders.data.length===0?(d(),F(e(D),{key:0},{default:l(()=>[t(e(u),{colspan:"7",class:"text-center text-gray-500"},{default:l(()=>s[22]||(s[22]=[r(" Không tìm thấy đơn hàng nào. ")])),_:1,__:[22]})]),_:1})):(d(!0),f(x,{key:1},T(n.orders.data,a=>(d(),F(e(D),{key:a.id,class:"hover:bg-muted/30"},{default:l(()=>[t(e(u),{class:"font-medium"},{default:l(()=>[o("div",ye,i(a.order_number),1)]),_:2},1024),t(e(u),null,{default:l(()=>[o("div",null,[o("p",he,i(a.customer_name),1),o("p",we,i(a.phone),1),o("p",$e,i(a.email),1)])]),_:2},1024),t(e(u),null,{default:l(()=>[r(i(a.user.name),1)]),_:2},1024),t(e(u),null,{default:l(()=>[t(e(P),null,{default:l(()=>[t(e(Q),{asChild:""},{default:l(()=>[t(e(v),{variant:"outline",class:"w-[180px] justify-between"},{default:l(()=>[t(e(j),{class:h([S[a.status],"flex items-center gap-1.5 px-1.5 py-0.5 text-xs"])},{default:l(()=>[r(i(N[a.status]),1)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1024),t(e(W),{class:"w-[180px]"},{default:l(()=>[(d(),f(x,null,T(N,(m,y)=>t(e(q),{key:y,onClick:Se=>A(a.id,y),class:h({"bg-muted":a.status===y})},{default:l(()=>[t(e(j),{class:h([S[y],"flex items-center gap-1.5 px-1.5 py-0.5 text-xs"])},{default:l(()=>[r(i(m),1)]),_:2},1032,["class"])]),_:2},1032,["onClick","class"])),64))]),_:2},1024)]),_:2},1024)]),_:2},1024),t(e(u),{class:"text-right font-semibold"},{default:l(()=>[r(i(J(a.total)),1)]),_:2},1024),t(e(u),null,{default:l(()=>[r(i(new Date(a.created_at).toLocaleString()),1)]),_:2},1024),t(e(u),{class:"text-right"},{default:l(()=>[t(e(P),null,{default:l(()=>[t(e(Q),{asChild:""},{default:l(()=>[t(e(v),{variant:"ghost",size:"icon"},{default:l(()=>[t(e(O),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(W),{align:"end"},{default:l(()=>[t(e(q),{asChild:""},{default:l(()=>[t(e(se),{href:n.route("admin.orders.show",a.id),class:"flex items-center"},{default:l(()=>[t(e(O),{class:"mr-2 h-4 w-4"}),s[23]||(s[23]=o("span",null,"Xem chi tiết",-1))]),_:2,__:[23]},1032,["href"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),o("div",ke,[o("div",Ce," Hiển thị từ "+i(n.orders.from)+" đến "+i(n.orders.to)+" của "+i(n.orders.total)+" kết quả ",1),o("div",Ve,[t(e(v),{variant:"ghost",size:"icon",disabled:!n.orders.prev_page_url,onClick:s[4]||(s[4]=a=>n.orders.prev_page_url&&e(w).get(n.orders.prev_page_url))},{default:l(()=>[t(e(me),{class:"h-4 w-4"})]),_:1},8,["disabled"]),(d(!0),f(x,null,T(e(Y),(a,m)=>(d(),f(x,{key:a.type==="ellipsis"?"ellipsis-"+m:"page-"+a.page},[a.type==="page"?(d(),F(e(v),{key:0,variant:"ghost",size:"sm",class:h({"bg-primary text-primary-foreground":a.active}),onClick:y=>e(w).get(a.url),innerHTML:a.label},null,8,["class","onClick","innerHTML"])):(d(),f("span",Te,"..."))],64))),128)),t(e(v),{variant:"ghost",size:"icon",disabled:!n.orders.next_page_url,onClick:s[5]||(s[5]=a=>n.orders.next_page_url&&e(w).get(n.orders.next_page_url))},{default:l(()=>[t(e(ue),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])])]),_:1})],64))}});export{rt as default};
