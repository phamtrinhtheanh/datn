import{d as w,m as P,c as E,h as y,o as n,w as d,n as B,i as g,u as e,p as F,q as T,l as C,b as o,s as R,x as j,r as D,k as K,e as u,f as p,t as _,a as b,j as O,F as z}from"./app-W8GsMJBJ.js";import{P as U,c as S,_ as q}from"./index-BEoszeNT.js";import{_ as x}from"./Input.vue_vue_type_script_setup_true_lang-C6Fl9x3V.js";import{_ as I}from"./Textarea.vue_vue_type_script_setup_true_lang-JA9tmBKb.js";import{_ as h}from"./Label.vue_vue_type_script_setup_true_lang-D0qov6Wg.js";import{c as L,u as M}from"./useForwardPropsEmits-2WMn0-FV.js";import{u as A,a as N,r as X}from"./useForwardExpose-BNEyOWp8.js";import{u as G}from"./useFormControl-DMEu9MKa.js";import{_ as H}from"./VisuallyHiddenInput-CpwnCcUk.js";import{_ as J}from"./index-DnK9cWvE.js";import{d as Q,a as W,b as Y,c as Z,_ as ee}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DtohgoIZ.js";import{X as se}from"./x-B2krrnJX.js";const[ae,te]=L("SwitchRoot"),oe=w({__name:"SwitchRoot",props:{defaultValue:{type:Boolean},modelValue:{type:[Boolean,null],default:void 0},disabled:{type:Boolean},id:{},value:{default:"on"},asChild:{type:Boolean},as:{default:"button"},name:{},required:{type:Boolean}},emits:["update:modelValue"],setup(v,{emit:f}){const r=v,m=f,{disabled:i}=P(r),s=A(r,"modelValue",m,{defaultValue:r.defaultValue,passive:r.modelValue===void 0});function c(){i.value||(s.value=!s.value)}const{forwardRef:k,currentElement:V}=N(),$=G(V),t=E(()=>{var a;return r.id&&V.value?(a=document.querySelector(`[for="${r.id}"]`))==null?void 0:a.innerText:void 0});return te({modelValue:s,toggleCheck:c,disabled:i}),(a,l)=>(n(),y(e(U),F(a.$attrs,{id:a.id,ref:e(k),role:"switch",type:a.as==="button"?"button":void 0,value:a.value,"aria-label":a.$attrs["aria-label"]||t.value,"aria-checked":e(s),"aria-required":a.required,"data-state":e(s)?"checked":"unchecked","data-disabled":e(i)?"":void 0,"as-child":a.asChild,as:a.as,disabled:e(i),onClick:c,onKeydown:T(C(c,["prevent"]),["enter"])}),{default:d(()=>[B(a.$slots,"default",{modelValue:e(s)}),e($)&&a.name?(n(),y(e(H),{key:0,type:"checkbox",name:a.name,disabled:e(i),required:a.required,value:a.value,checked:!!e(s)},null,8,["name","disabled","required","value","checked"])):g("",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),re=w({__name:"SwitchThumb",props:{asChild:{type:Boolean},as:{default:"span"}},setup(v){const f=ae();return N(),(r,m)=>{var i;return n(),y(e(U),{"data-state":(i=e(f).modelValue)!=null&&i.value?"checked":"unchecked","data-disabled":e(f).disabled.value?"":void 0,"as-child":r.asChild,as:r.as},{default:d(()=>[B(r.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"])}}}),le=w({__name:"Switch",props:{defaultValue:{type:Boolean},modelValue:{type:[Boolean,null]},disabled:{type:Boolean},id:{},value:{},asChild:{type:Boolean},as:{type:[String,Object,Function]},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue"],setup(v,{emit:f}){const r=v,m=f,i=X(r,"class"),s=M(i,m);return(c,k)=>(n(),y(e(oe),F({"data-slot":"switch"},e(s),{class:e(S)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r.class)}),{default:d(()=>[o(e(re),{"data-slot":"switch-thumb",class:R(e(S)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"))},{default:d(()=>[B(c.$slots,"thumb")]),_:3},8,["class"])]),_:3},16,["class"]))}}),de={class:"space-y-2"},ie={key:0,class:"text-sm text-red-500"},ne={class:"space-y-2"},ce={key:0,class:"text-sm text-red-500"},ue={class:"space-y-2"},me={key:0,class:"mb-2"},pe=["src"],fe={key:1,class:"text-sm text-red-500"},_e={class:"space-y-2"},be={key:0,class:"text-sm text-red-500"},ve={class:"space-y-2"},he={class:"flex flex-wrap gap-2 mb-2"},ge=["onClick"],ye={class:"flex items-center space-x-2"},ke={key:0},Ve={key:1},Re=w({__name:"CategoryDialog",props:{show:Boolean,category:{type:Object,default:()=>({})}},emits:["close"],setup(v,{emit:f}){const r=v,m=f,i=E(()=>{var t;return!!((t=r.category)!=null&&t.id)}),s=j({name:"",description:"",icon:null,is_active:!0,order:0,tags:[],_method:"PUT"}),c=D("");K(()=>r.category,t=>{t!=null&&t.id?(s.name=t.name||"",s.description=t.description||"",s.is_active=t.is_active??!0,s.order=t.order||0,s.tags=t.tags||[],s.icon=null):(s.reset(),s.clearErrors())},{immediate:!0});const k=()=>{const t=c.value.trim();t&&!s.tags.includes(t)&&s.tags.push(t),c.value=""},V=t=>{s.tags=s.tags.filter(a=>a!==t)},$=()=>{i.value?s.post(route("admin.categories.update",r.category),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{m("close"),s.reset(),s.clearErrors()}}):s.post(route("admin.categories.store"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{m("close"),s.reset(),s.clearErrors()}})};return(t,a)=>(n(),y(e(Q),{open:v.show,"onUpdate:open":a[7]||(a[7]=l=>m("close"))},{default:d(()=>[o(e(ee),{class:"sm:max-w-[600px]"},{default:d(()=>[o(e(W),null,{default:d(()=>[o(e(Y),{class:"text-xl"},{default:d(()=>[p(_(i.value?"Edit Category":"Create Category"),1)]),_:1})]),_:1}),u("form",{onSubmit:C($,["prevent"]),class:"space-y-6",enctype:"multipart/form-data"},[u("div",de,[o(e(h),{for:"name",class:"text-base"},{default:d(()=>a[8]||(a[8]=[p("Name")])),_:1,__:[8]}),o(e(x),{id:"name",modelValue:e(s).name,"onUpdate:modelValue":a[0]||(a[0]=l=>e(s).name=l),disabled:e(s).processing,class:"h-10"},null,8,["modelValue","disabled"]),e(s).errors.name?(n(),b("p",ie,_(e(s).errors.name),1)):g("",!0)]),u("div",ne,[o(e(h),{for:"description",class:"text-base"},{default:d(()=>a[9]||(a[9]=[p("Description")])),_:1,__:[9]}),o(e(I),{id:"description",modelValue:e(s).description,"onUpdate:modelValue":a[1]||(a[1]=l=>e(s).description=l),disabled:e(s).processing,class:"min-h-[100px]"},null,8,["modelValue","disabled"]),e(s).errors.description?(n(),b("p",ce,_(e(s).errors.description),1)):g("",!0)]),u("div",ue,[o(e(h),{for:"icon",class:"text-base"},{default:d(()=>a[10]||(a[10]=[p("Icon")])),_:1,__:[10]}),i.value&&r.category.icon?(n(),b("div",me,[u("img",{src:"/storage/"+r.category.icon,class:"w-20 h-20 object-cover rounded"},null,8,pe)])):g("",!0),o(e(x),{id:"icon",type:"file",onInput:a[2]||(a[2]=l=>e(s).icon=l.target.files[0]),disabled:e(s).processing,class:"h-10",accept:"image/*"},null,8,["disabled"]),e(s).errors.icon?(n(),b("p",fe,_(e(s).errors.icon),1)):g("",!0)]),u("div",_e,[o(e(h),{for:"order",class:"text-base"},{default:d(()=>a[11]||(a[11]=[p("Order")])),_:1,__:[11]}),o(e(x),{id:"order",type:"number",modelValue:e(s).order,"onUpdate:modelValue":a[3]||(a[3]=l=>e(s).order=l),disabled:e(s).processing,class:"h-10"},null,8,["modelValue","disabled"]),e(s).errors.order?(n(),b("p",be,_(e(s).errors.order),1)):g("",!0)]),u("div",ve,[o(e(h),{class:"text-base"},{default:d(()=>a[12]||(a[12]=[p("Tags (Thông số kỹ thuật)")])),_:1,__:[12]}),u("div",he,[(n(!0),b(z,null,O(e(s).tags,l=>(n(),y(e(J),{key:l,variant:"secondary",class:"flex items-center"},{default:d(()=>[p(_(l)+" ",1),u("button",{type:"button",onClick:xe=>V(l),class:"ml-1"},[o(e(se),{class:"w-3 h-3"})],8,ge)]),_:2},1024))),128))]),o(e(x),{modelValue:c.value,"onUpdate:modelValue":a[4]||(a[4]=l=>c.value=l),onKeydown:T(C(k,["prevent"]),["enter"]),placeholder:"Nhập tag rồi nhấn Enter",disabled:e(s).processing,class:"h-10"},null,8,["modelValue","onKeydown","disabled"])]),u("div",ye,[o(e(le),{id:"is_active",checked:e(s).is_active,"onUpdate:checked":a[5]||(a[5]=l=>e(s).is_active=l),disabled:e(s).processing},null,8,["checked","disabled"]),o(e(h),{for:"is_active",class:"text-base"},{default:d(()=>a[13]||(a[13]=[p("Active")])),_:1,__:[13]})]),o(e(Z),null,{default:d(()=>[o(e(q),{type:"button",variant:"outline",onClick:a[6]||(a[6]=l=>m("close")),disabled:e(s).processing,class:"h-10"},{default:d(()=>a[14]||(a[14]=[p(" Cancel ")])),_:1,__:[14]},8,["disabled"]),o(e(q),{type:"submit",disabled:e(s).processing,class:"h-10"},{default:d(()=>[e(s).processing?(n(),b("span",ke,_(i.value?"Updating...":"Creating..."),1)):(n(),b("span",Ve,_(i.value?"Update Category":"Create Category"),1))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]))}});export{Re as _};
