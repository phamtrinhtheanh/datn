import{a as q,_ as T}from"./CardContent.vue_vue_type_script_setup_true_lang-DWwbMlXi.js";import{a as g,_ as b}from"./index-y4m70pd7.js";import{_ as N}from"./autoplay-D2UkOtpX.js";import{_ as B}from"./index-DFC6OJMC.js";import{d as w,c as k,a as u,o as c,e as a,F as h,j as C,h as S,w as i,b as n,u as o,S as E,i as L,t as m,f as y,x as V,r as v,k as j,W as x,g as P,s as D}from"./app-Cwc9LYHu.js";import{S as M}from"./shopping-cart-CJyV0agq.js";import{_ as W}from"./MainLayout.vue_vue_type_script_setup_true_lang-D4i8tk-0.js";/* empty css               */import"./useForwardExpose-CS7qPF-2.js";import"./createLucideIcon-Dy_Ob6gd.js";import"./sun-CmC_ikMD.js";import"./useForwardPropsEmits-CXvHjQJT.js";import"./DialogPortal-JCx5xgQM.js";import"./DialogTrigger-Bf3stY9p.js";import"./search-CRo4G1mf.js";import"./Sonner.vue_vue_type_script_setup_true_lang-D-FqVR_5.js";import"./vue-sonner-YPBXOSHX.js";const z={class:"space-y-4"},F={class:"grid grid-cols-2 gap-4 md:grid-cols-4 lg:grid-cols-5"},H={class:"relative mx-2 mb-2 overflow-hidden rounded-lg border"},A=["src","alt"],I={class:"line-clamp-2 min-h-[3em] text-base font-medium"},J={key:0,class:"text-sm text-muted-foreground"},O={class:"line-through"},Q={class:"text-xl font-bold text-red-700"},G=w({__name:"ProductSearchSection",props:{products:{}},setup(p){const r=p,d=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.error("Error parsing images:",e),[]}return s||[]},_=k(()=>r.products.map(s=>{const e=Math.floor((s.line_price-s.price)/s.line_price*100),t=d(s.images);return{...s,images:t,discount:e}})),f=s=>{V({quantity:1}).post(route("cart.add",s),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{window.dispatchEvent(new CustomEvent("cart-updated"))},onError:t=>console.error("Lỗi khi thêm vào giỏ hàng",t)})};return(s,e)=>(c(),u("div",z,[a("div",F,[(c(!0),u(h,null,C(_.value,t=>(c(),S(o(T),{key:t.id,class:"group transition-shadow hover:shadow-md py-2"},{default:i(()=>[n(o(E),{href:`/${t.slug}`,class:"block"},{default:i(()=>[a("div",H,[a("img",{src:t.images[0],alt:t.name,class:"aspect-square w-full object-contain transition-transform duration-300 group-hover:scale-[1.02]"},null,8,A)]),n(o(q),{class:"p-4 pt-0 pb-2"},{default:i(()=>[a("h3",I,m(t.name),1),t.discount>0?(c(),u("p",J,[a("span",O,m(o(g)(t.line_price)),1),e[0]||(e[0]=y("   ")),a("span",null,[n(o(B),{variant:"outline"},{default:i(()=>[y(" -"+m(t.discount)+"% ",1)]),_:2},1024)])])):L("",!0),a("p",Q,m(o(g)(t.price)),1)]),_:2},1024)]),_:2},1032,["href"]),n(o(N),{class:"flex justify-between px-4 pb-1 pt-0"},{default:i(()=>[e[1]||(e[1]=a("p",{class:"text-sm font-semibold"},"Còn hàng",-1)),n(o(b),{onClick:l=>f(t.id),class:"h-10 w-10 rounded-full"},{default:i(()=>[n(o(M),{class:"h-4 w-4 text-white"})]),_:2},1032,["onClick"])]),_:2,__:[1]},1024)]),_:2},1024))),128))])]))}}),K={class:"container mx-auto space-y-4 px-4"},R={class:"flex justify-center gap-2"},_e=w({__name:"ProductSearch",props:{products:{},category:{},query:{},sort_by:{}},setup(p){const r=p,d=[{title:"Trang chủ",href:"/"},{title:r.category?r.category.name:"Tìm kiếm",href:r.category?r.category.slug:""}];function _(e){e&&x.visit(e)}const f=v(r.query||""),s=v(r.sort_by||"");return j(s,e=>{x.get(route("search"),{query:f.value,sort_by:e})}),k(()=>r.products.links.filter(e=>{const t=e.label.toLowerCase();return!t.includes("previous")&&!t.includes("next")})),(e,t)=>(c(),u(h,null,[n(o(P),{title:"The Anh Computer"}),n(W,{breadcrumbs:d,query:e.query},{default:i(()=>[a("div",K,[n(G,{products:r.products.data},null,8,["products"]),a("div",R,[(c(!0),u(h,null,C(r.products.links.filter(l=>!/«|»|Previous|Next/.test(l.label)),(l,$)=>(c(),S(o(b),{key:$,variant:"ghost",size:"sm",class:D({"bg-primary text-primary-foreground":l.active}),onClick:U=>_(l.url),innerHTML:l.label},null,8,["class","onClick","innerHTML"]))),128))])])]),_:1},8,["query"])],64))}});export{_e as default};
