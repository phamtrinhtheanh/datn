import{_ as v,a as w}from"./index-D8-AFNwL.js";import{c as J,_ as K,a as X,b as Y}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Ov8_TTm4.js";import{_ as Q}from"./Input.vue_vue_type_script_setup_true_lang-BnKsr0LL.js";import{_ as O,b as R,a as P,c as g}from"./TableRow.vue_vue_type_script_setup_true_lang-DTJcijSt.js";import{_ as W}from"./MainLayout.vue_vue_type_script_setup_true_lang-CPRXMufV.js";import{d as Z,r as m,c as ee,k as S,A as te,h as b,o as c,w as l,e as n,b as a,u as e,f as _,t as i,a as h,F as B,j as M,i as q,s as se,L as ae}from"./app-CmJJduxX.js";import{c as j}from"./createLucideIcon-CdlTwhfE.js";import{C as le}from"./chevron-left-DV5y4lZa.js";import{C as ne}from"./search-C59MdXMc.js";import"./useForwardPropsEmits-D044zIqy.js";import"./useForwardExpose-BM1jTi0X.js";import"./DialogPortal-Bybb0N8i.js";import"./x-CMWJtdGN.js";import"./sun-Tclno5Du.js";import"./DialogTrigger-Ct1LDxN_.js";import"./Sonner.vue_vue_type_script_setup_true_lang-l-Dfm-6H.js";import"./vue-sonner-DAmkgFkX.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=j("RotateCcwIcon",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=j("TrashIcon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),ie={class:"container mx-auto"},re={class:"flex justify-between p-4"},ue={class:"text-base font-bold text-red-700"},ce={class:"p-4"},de={key:0,class:"flex items-center gap-4"},me={class:"w-32 p-2"},ve=["href"],_e=["src"],fe={class:"flex-1"},he={class:"text-lg font-bold"},pe={class:"text-base font-semibold text-gray-600"},ge={class:"text-base font-bold text-red-700"},xe={class:"text-sm"},be={class:"text-base font-bold text-red-600"},ye={class:"gap flex"},ke={class:"text-md"},Ce={class:"mt-4 flex gap-2"},we={key:0,class:"flex justify-center py-8"},Ne={key:1,class:"mt-4 max-h-[500px] overflow-y-auto"},$e=["href"],Te=["src"],Pe={class:"text-base font-semibold"},Be={class:"text-md font-medium text-gray-800"},Me={class:"text-base font-bold text-red-700"},He={key:2,class:"mt-4 flex items-center justify-between"},Ve={class:"text-sm text-gray-600"},Ae={class:"flex gap-2"},We=Z({__name:"Build",setup(Ie){const D=[{title:"Trang chủ",href:"/"},{title:"Xây dựng cấu hình",href:"/buildpc"}],y=["MAINBOARD - BO MẠCH CHỦ","CPU - BỘ XỬ LÝ","RAM - BỘ NHỚ TRONG","VGA - CARD MÀN HÌNH","Ổ CỨNG","PSU - NGUỒN MÁY TÍNH","CASE - VỎ MÁY TÍNH","MONITOR - MÀN HÌNH","PHỤ KIỆN"],u=m(Array(y.length).fill(null)),k=m(!1),C=m(null),H=m(""),f=m(""),x=m([]),N=m(!1),d=m(1),p=m(1),z=m(10),G=ee(()=>u.value.reduce((s,t)=>s+(t?t.price*t.quantity:0),0));S(u,s=>{localStorage.setItem("pcBuild",JSON.stringify(s))},{deep:!0}),te(()=>{const s=localStorage.getItem("pcBuild");s&&(u.value=JSON.parse(s))});const U=s=>{u.value[s]=null},V=async s=>{C.value=s,H.value=y[s].split("-")[0].trim(),k.value=!0,f.value="",x.value=[],d.value=1,await $()},$=async()=>{N.value=!0;try{const s={q:f.value.trim(),category_id:C.value+2,page:d.value,per_page:z.value},t=await ae.get(route("build.part"),{params:s});x.value=Array.isArray(t.data)?t.data:[],d.value=1,p.value=1}catch(s){console.error("Error loading products:",s),x.value=[]}finally{N.value=!1}},E=s=>{C.value!==null&&(u.value[C.value]={id:s.id,name:s.name,price:s.price,slug:s.slug,quantity:1,image:s.images[0]??"",status:s.stock>0?"Còn hàng":"Hết hàng"},k.value=!1)},F=()=>{u.value=Array(y.length).fill(null),localStorage.removeItem("pcBuild")},T=s=>{s>=1&&s<=p.value&&(d.value=s,$())};let A;return S(f,()=>{clearTimeout(A),A=setTimeout(()=>{d.value=1,$()},500)}),(s,t)=>(c(),b(W,{breadcrumbs:D},{default:l(()=>[n("div",ie,[t[10]||(t[10]=n("h2",{class:"mb-4 text-center text-xl font-extrabold"},"Build PC - Tự chọn linh kiện xây dựng cấu hình",-1)),n("div",re,[a(e(v),{class:"bg-gray-800 text-base font-bold",onClick:F},{default:l(()=>[t[5]||(t[5]=_(" Làm mới ")),a(e(L),{class:"ml-2"})]),_:1,__:[5]}),n("div",ue,[t[6]||(t[6]=_(" Chi phí dự tính: ")),n("span",null,i(e(w)(G.value)),1)])]),n("div",ce,[a(e(O),{class:"border"},{default:l(()=>[a(e(R),null,{default:l(()=>[(c(),h(B,null,M(y,(o,r)=>a(e(P),{key:r,class:"border"},{default:l(()=>[a(e(g),{class:"w-96 border text-base font-bold"},{default:l(()=>[_(i(r+1)+". "+i(o),1)]),_:2},1024),a(e(g),null,{default:l(()=>[u.value[r]?(c(),h("div",de,[n("div",me,[n("a",{href:u.value[r].slug},[n("img",{src:u.value[r].image,alt:"Product image",class:"aspect-square w-24 object-contain"},null,8,_e)],8,ve)]),n("div",fe,[n("div",he,i(u.value[r].name),1),n("div",pe,i(u.value[r].status),1),n("div",ge," Giá build: "+i(e(w)(u.value[r].price)),1)]),n("div",xe,i(u.value[r].quantity),1),n("div",be," Tổng: "+i(e(w)(u.value[r].price*u.value[r].quantity)),1),n("div",ye,[a(e(v),{variant:"link",size:"sm",onClick:I=>V(r)},{default:l(()=>[a(e(L),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),a(e(v),{variant:"link",size:"sm",onClick:I=>U(r)},{default:l(()=>[a(e(oe),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])])):(c(),b(e(v),{key:1,class:"text-base font-semibold py-5 my-2 mx-4",onClick:I=>V(r)},{default:l(()=>[t[7]||(t[7]=_(" Chọn ")),n("span",ke,i(o),1)]),_:2,__:[7]},1032,["onClick"]))]),_:2},1024)]),_:2},1024)),64))]),_:1})]),_:1})]),a(e(J),{open:k.value,"onUpdate:open":t[3]||(t[3]=o=>k.value=o),onOpen:t[4]||(t[4]=o=>f.value="")},{default:l(()=>[a(e(K),{class:"max-h-screen sm:max-w-[1000px]"},{default:l(()=>[a(e(X),null,{default:l(()=>[a(e(Y),null,{default:l(()=>[_("Chọn "+i(H.value),1)]),_:1})]),_:1}),n("div",Ce,[a(e(Q),{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=o=>f.value=o),placeholder:"Tìm kiếm sản phẩm..."},null,8,["modelValue"])]),N.value?(c(),h("div",we,t[8]||(t[8]=[n("div",{class:"h-12 w-12 animate-spin rounded-full border-b-2 border-t-2 border-gray-900"},null,-1)]))):(c(),h("div",Ne,[a(e(O),null,{default:l(()=>[a(e(R),null,{default:l(()=>[(c(!0),h(B,null,M(x.value,o=>(c(),b(e(P),{key:o.id,class:"cursor-pointer hover:bg-gray-100"},{default:l(()=>[a(e(g),{class:"w-32"},{default:l(()=>[n("a",{href:o.slug},[n("img",{src:o.images[0],alt:"Product image",class:"aspect-square w-full object-contain"},null,8,Te)],8,$e)]),_:2},1024),a(e(g),{class:"pl-6"},{default:l(()=>[n("div",Pe,i(o.name),1),n("div",Be,i(o.stock>0?"Còn hàng":"Hết hàng"),1),n("div",Me,"Giá: "+i(e(w)(o.price)),1)]),_:2},1024),a(e(g),{class:"text-right"},{default:l(()=>[a(e(v),{variant:"outline",class:"border-red-700 text-base font-semibold text-red-700",onClick:r=>E(o)},{default:l(()=>t[9]||(t[9]=[_(" Thêm vào cấu hình ")])),_:2,__:[9]},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),x.value.length===0?(c(),b(e(P),{key:0},{default:l(()=>[a(e(g),{colspan:"3",class:"py-8 text-center text-gray-500"},{default:l(()=>[_(i(f.value?"Không tìm thấy sản phẩm phù hợp":"Nhập từ khóa để tìm kiếm"),1)]),_:1})]),_:1})):q("",!0)]),_:1})]),_:1})])),p.value>1?(c(),h("div",He,[n("div",Ve,"Trang "+i(d.value)+" / "+i(p.value),1),n("div",Ae,[a(e(v),{variant:"outline",size:"sm",disabled:d.value===1,onClick:t[1]||(t[1]=o=>T(d.value-1))},{default:l(()=>[a(e(le),{class:"h-4 w-4"})]),_:1},8,["disabled"]),(c(!0),h(B,null,M(Math.min(5,p.value),o=>(c(),b(e(v),{key:o,variant:"outline",size:"sm",class:se({"bg-gray-200":d.value===o}),onClick:r=>T(o)},{default:l(()=>[_(i(o),1)]),_:2},1032,["class","onClick"]))),128)),a(e(v),{variant:"outline",size:"sm",disabled:d.value===p.value,onClick:t[2]||(t[2]=o=>T(d.value+1))},{default:l(()=>[a(e(ne),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):q("",!0)]),_:1})]),_:1},8,["open"])])]),_:1}))}});export{We as default};
