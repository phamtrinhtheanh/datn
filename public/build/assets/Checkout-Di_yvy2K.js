import{d as H,c as _,r,h as k,o as m,w as o,e as t,b as a,u as l,a as j,F as N,j as D,i as I,f as i,t as u,l as Q,H as q,R as P,W as R}from"./app-CmJJduxX.js";import{_ as E}from"./index-D8-AFNwL.js";import{_ as b}from"./Input.vue_vue_type_script_setup_true_lang-BnKsr0LL.js";import{_ as d}from"./Label.vue_vue_type_script_setup_true_lang-BEUZd-tX.js";import{_ as G,b as K,a as L,c as g}from"./TableRow.vue_vue_type_script_setup_true_lang-DTJcijSt.js";import{_ as W}from"./MainLayout.vue_vue_type_script_setup_true_lang-CPRXMufV.js";import{_ as z}from"./Textarea.vue_vue_type_script_setup_true_lang-D6Zs9w7c.js";import{_ as O,a as J,b as X,c as Y,d as U}from"./SelectValue.vue_vue_type_script_setup_true_lang-8wnpaB1E.js";import{C as Z}from"./chevron-left-DV5y4lZa.js";import"./useForwardExpose-BM1jTi0X.js";import"./sun-Tclno5Du.js";import"./createLucideIcon-CdlTwhfE.js";import"./useForwardPropsEmits-D044zIqy.js";import"./DialogPortal-Bybb0N8i.js";import"./DialogTrigger-Ct1LDxN_.js";import"./search-C59MdXMc.js";import"./Sonner.vue_vue_type_script_setup_true_lang-l-Dfm-6H.js";import"./vue-sonner-DAmkgFkX.js";import"./Collection-Cexjku1s.js";import"./usePrimitiveElement-hbI6zDTX.js";import"./check-Bn4QJ5u6.js";import"./useFocusGuards-DI5oPacC.js";import"./VisuallyHidden-CtYPX-TC.js";import"./useFormControl-CDuwxkrt.js";const ee={class:"flex w-full flex-col gap-4 lg:flex-row container mx-auto"},te={class:"flex-col rounded-lg bg-white p-6 lg:w-1/2"},se={class:"flex h-full flex-col justify-between"},le={class:"w-full rounded-md p-1"},ae=["src"],oe={class:"flex items-center"},ne={class:"min-w-[24px] text-center"},ie={class:"flex items-end justify-between"},de={class:"flex items-center hover:text-red-600",href:"/"},ue={class:"flex-col space-y-2 pr-4"},re={class:"flex items-center gap-2"},me={class:"flex w-full justify-between"},fe={class:"flex w-full justify-between"},ce={class:"flex w-full items-center justify-between"},pe={class:"text-lg font-extrabold text-red-700"},ve={class:"w-full lg:w-1/2"},_e={class:"rounded-lg border bg-white p-6"},xe={class:"flex flex-col gap-4"},be={class:"flex items-center gap-4"},ge={class:"flex items-center gap-4"},we={class:"flex items-center gap-4"},ye={class:"flex items-center gap-4"},he={class:"flex items-center gap-4"},Ve={class:"items-top flex flex-col gap-4"},$e={class:"flex-1 flex-col items-center space-y-4"},Te={class:"flex items-center"},ke={class:"flex items-center"},Xe=H({__name:"Checkout",props:{products:{},total:{},activePromotions:{}},setup(F){const f=F,M=_(()=>f.products.map(n=>({...n,subtotal:n.price*n.quantity,product:{...n.product,thumbnail:n.product.images[0]??null}}))),x=_(()=>f.total),w=r("Nguyễn Văn A"),y=r("0987654321"),h=r("demo@gmail.com"),V=r("123 Đường Demo, Quận 1, TP.HCM"),$=r("Giao hàng giờ hành chính"),c=r("vnpay"),p=r(""),S=_(()=>{const n=f.activePromotions.find(e=>e.code===p.value);return n?n.id:0}),T=_(()=>{if(!p.value)return 0;const n=f.activePromotions.find(e=>e.code===p.value);return n?n.type==="percentage"?x.value*n.value/100:n.value:0}),C=_(()=>x.value-T.value),A=()=>{const n={customer_name:w.value,phone:y.value,email:h.value,address:V.value,payment:c.value,notes:$.value,products:f.products,total:x.value,discount:T.value,final_total:C.value,promotion:S.value};R.post(route("order.create"),n,{onSuccess:()=>{}})},B=[{title:"Trang chủ",href:"/"},{title:"Thông tin đơn hàng",href:"/cart"}],v=n=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",minimumFractionDigits:0,maximumFractionDigits:0}).format(n);return(n,e)=>(m(),k(W,{breadcrumbs:B},{default:o(()=>[t("div",ee,[t("div",te,[t("div",se,[t("div",null,[e[9]||(e[9]=t("p",{class:"py-3 text-xl font-extrabold text-gray-800"},"Thông tin đơn hàng",-1)),a(l(G),{class:"w-full table-fixed"},{default:o(()=>[a(l(K),null,{default:o(()=>[(m(!0),j(N,null,D(M.value,s=>(m(),k(l(L),{key:s.id},{default:o(()=>[a(l(g),{class:"w-24"},{default:o(()=>[t("div",le,[s.product.thumbnail?(m(),j("img",{key:0,src:s.product.thumbnail,alt:"product image",class:"aspect-square w-full object-contain"},null,8,ae)):I("",!0)])]),_:2},1024),a(l(g),{class:"truncate text-base font-semibold"},{default:o(()=>[i(u(s.product.name),1)]),_:2},1024),a(l(g),{class:"w-32 text-center"},{default:o(()=>[t("div",oe,[e[8]||(e[8]=i(" x ")),t("span",ne,u(s.quantity),1)])]),_:2},1024),a(l(g),{class:"w-32 text-right font-bold"},{default:o(()=>[i(u(v(s.subtotal)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),t("div",ie,[t("a",de,[a(l(Z),{class:"mr-2 h-4 w-4"}),e[10]||(e[10]=i(" Quay lại mua sắm"))]),t("div",ue,[t("div",re,[a(l(d),{class:"text-base font-semibold"},{default:o(()=>e[11]||(e[11]=[i("Mã khuyến mãi:")])),_:1,__:[11]}),a(l(O),{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=s=>p.value=s)},{default:o(()=>[a(l(J),{class:"w-[200px]"},{default:o(()=>[a(l(X),{placeholder:"Chọn mã khuyến mãi"})]),_:1}),a(l(Y),null,{default:o(()=>[a(l(U),{value:"0"},{default:o(()=>e[12]||(e[12]=[i("Không áp dụng")])),_:1,__:[12]}),(m(!0),j(N,null,D(n.activePromotions,s=>(m(),k(l(U),{key:s.id,value:s.code},{default:o(()=>[i(u(s.name)+" - "+u(s.type==="percentage"?s.value+"%":v(s.value)),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),t("p",me,[e[13]||(e[13]=t("span",{class:"mr-4 text-base font-semibold"},"Tổng cộng:",-1)),t("span",null,u(v(x.value)),1)]),t("p",fe,[e[14]||(e[14]=t("span",{class:"mr-24 text-base font-semibold"},"Khuyến mãi:",-1)),t("span",null,u(v(T.value)),1)]),t("p",ce,[e[15]||(e[15]=t("span",{class:"mr-4 text-base font-extrabold"},"Tổng cộng:",-1)),t("span",pe,u(v(C.value)),1)])])])])]),t("div",ve,[t("div",_e,[e[25]||(e[25]=t("h2",{class:"mb-4 rounded-lg bg-gray-100 p-3 text-xl font-extrabold"},"Thông tin khách hàng",-1)),t("form",{onSubmit:Q(A,["prevent"]),class:"space-y-4"},[t("div",xe,[t("div",be,[a(l(d),{class:"w-1/3 min-w-[120px] text-base font-semibold"},{default:o(()=>e[16]||(e[16]=[i("Họ tên")])),_:1,__:[16]}),a(l(b),{class:"flex-1","text-base":"",required:"",modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=s=>w.value=s)},null,8,["modelValue"])]),t("div",ge,[a(l(d),{class:"w-1/3 min-w-[120px] text-base font-semibold"},{default:o(()=>e[17]||(e[17]=[i("Số điện thoại")])),_:1,__:[17]}),a(l(b),{class:"flex-1","text-base":"",required:"",modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=s=>y.value=s)},null,8,["modelValue"])]),t("div",we,[a(l(d),{class:"w-1/3 min-w-[120px] text-base font-semibold"},{default:o(()=>e[18]||(e[18]=[i("Email")])),_:1,__:[18]}),a(l(b),{class:"flex-1","text-base":"",required:"",type:"email",modelValue:h.value,"onUpdate:modelValue":e[3]||(e[3]=s=>h.value=s)},null,8,["modelValue"])]),t("div",ye,[a(l(d),{class:"w-1/3 min-w-[120px] text-base font-semibold"},{default:o(()=>e[19]||(e[19]=[i("Địa chỉ")])),_:1,__:[19]}),a(l(b),{class:"flex-1","text-base":"",required:"",modelValue:V.value,"onUpdate:modelValue":e[4]||(e[4]=s=>V.value=s)},null,8,["modelValue"])]),t("div",he,[a(l(d),{class:"w-1/3 min-w-[120px] text-base font-semibold"},{default:o(()=>e[20]||(e[20]=[i("Ghi chú")])),_:1,__:[20]}),a(l(z),{class:"flex-1","text-base":"",required:"",modelValue:$.value,"onUpdate:modelValue":e[5]||(e[5]=s=>$.value=s)},null,8,["modelValue"])])]),t("div",Ve,[a(l(d),{class:"w-1/3 min-w-[120px] text-base font-semibold"},{default:o(()=>e[21]||(e[21]=[i("Thanh toán")])),_:1,__:[21]}),t("div",$e,[t("div",Te,[q(t("input",{type:"radio",value:"vnpay",id:"vnpay","onUpdate:modelValue":e[6]||(e[6]=s=>c.value=s),name:"payment",class:"h-3 w-3"},null,512),[[P,c.value]]),a(l(d),{for:"vnpay",class:"ml-2 flex items-center gap-2 text-base"},{default:o(()=>e[22]||(e[22]=[t("span",{class:"h-12 w-12 overflow-hidden rounded-md border bg-gray-100"},[t("img",{src:"https://vnpay.vn/s1/statics.vnpay.vn/2023/6/0oxhzjmxbksr1686814746087.png",class:"h-full w-full object-contain",alt:"vnpay"})],-1),i("Thanh toán bằng QR Code, thẻ ATM nội địa, VISA")])),_:1,__:[22]})]),t("div",ke,[q(t("input",{type:"radio",id:"cod",value:"cod","onUpdate:modelValue":e[7]||(e[7]=s=>c.value=s),name:"payment",class:"h-3 w-3"},null,512),[[P,c.value]]),a(l(d),{for:"cod",class:"ml-2 flex items-center gap-2 text-base"},{default:o(()=>e[23]||(e[23]=[t("span",{class:"h-12 w-12 overflow-hidden rounded-md border bg-gray-100"},[t("img",{src:"https://cdn-icons-png.flaticon.com/512/10053/10053703.png",class:"h-full w-full object-contain",alt:"vnpay"})],-1),i("Thanh toán khi nhận hàng(COD)")])),_:1,__:[23]})])])]),a(l(E),{class:"w-full bg-red-700 py-2 text-base font-bold hover:bg-red-800",type:"submit"},{default:o(()=>e[24]||(e[24]=[i(" Đặt hàng")])),_:1,__:[24]})],32)])])])]),_:1}))}});export{Xe as default};
