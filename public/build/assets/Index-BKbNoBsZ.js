import{_ as y}from"./index-K0FVZKuS.js";import{_ as c}from"./index-Bi_qipny.js";import{_ as E,a as z,b as G,c as V}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DbaRmOJN.js";import{_ as I,a as v,b as K,c as r}from"./TableRow.vue_vue_type_script_setup_true_lang-SjxQzQgy.js";import{_ as L,a as o}from"./TableHeader.vue_vue_type_script_setup_true_lang-CpmY8qAA.js";import{_ as O}from"./AppLayout.vue_vue_type_script_setup_true_lang-IF2V6vrE.js";import{d as P,r as S,h as b,o as u,w as e,e as l,b as s,u as t,S as h,f as i,a as U,F as W,j as q,t as _,s as H,W as C}from"./app-Cdi_seLk.js";import{_ as X}from"./Label.vue_vue_type_script_setup_true_lang-hFIdDLsU.js";import{_ as N,a as T,b as j,c as B,d as f}from"./SelectValue.vue_vue_type_script_setup_true_lang-C3bAROUO.js";import{E as A}from"./ellipsis-vertical-Dx3XncN4.js";import{f as J}from"./format-DF3zju1I.js";import"./useForwardExpose-BEz30n0G.js";import"./useForwardPropsEmits-CcLnhiEM.js";import"./DialogPortal-DyU5Youu.js";import"./Collection-DZ2PJz9c.js";import"./usePrimitiveElement-Bl6t-gbd.js";import"./useFocusGuards-DPvUNzkk.js";import"./RovingFocusGroup-BUD0FIFP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-DwzU_E9u.js";import"./createLucideIcon-Dvgbo__P.js";import"./VisuallyHidden-fcAHhEpi.js";import"./x-Chvp1jPq.js";import"./shopping-cart-UQFKnvAk.js";import"./Sonner.vue_vue_type_script_setup_true_lang-ebLjZvkU.js";import"./vue-sonner-CwCT7mN6.js";import"./check-BP9UBmzw.js";import"./useFormControl-BtsRjYEG.js";const Q={class:"container mx-auto py-6"},R={class:"mb-6 flex items-start justify-between"},Y={class:"mb-4 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Z={class:"flex items-center gap-4"},tt={class:"overflow-hidden border-t border-b"},et={class:"px-3 py-3"},st={class:"px-3 py-3"},at={class:"px-3 py-3"},lt={class:"px-3 py-3"},dt={class:"px-3 py-3"},it={class:"text-sm"},nt={class:"text-sm"},rt={class:"px-3 py-3"},ot={class:"px-3 py-3"},Kt=P({__name:"Index",props:{promotions:{type:Object,required:!0},filters:{type:Object,default:()=>({sort_field:"name",sort_direction:"asc"})}},setup(m){var w,k;const g=m,p=S(((w=g.filters)==null?void 0:w.sort_field)||"name"),x=S(((k=g.filters)==null?void 0:k.sort_direction)||"asc"),$=n=>J(new Date(n),"dd/MM/yyyy"),D=n=>new Intl.NumberFormat("vi-VN").format(n),F=n=>{confirm("Bạn có chắc chắn muốn xóa khuyến mãi này?")&&C.delete(route("admin.promotions.destroy",n.id))},M=()=>{C.get(route("admin.promotions.index"),{sort_field:p.value,sort_direction:x.value},{preserveState:!0})};return(n,a)=>(u(),b(O,null,{default:e(()=>[l("div",Q,[l("div",R,[a[3]||(a[3]=l("h1",{class:"mb-4 text-3xl font-extrabold"},"Khuyến mãi",-1)),s(t(h),{href:n.route("admin.promotions.create")},{default:e(()=>[s(t(c),null,{default:e(()=>a[2]||(a[2]=[i("Thêm khuyến mãi")])),_:1,__:[2]})]),_:1},8,["href"])]),l("div",Y,[l("div",Z,[s(t(X),{class:""},{default:e(()=>a[4]||(a[4]=[i("Sắp xếp theo:")])),_:1,__:[4]}),s(t(N),{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=d=>p.value=d),class:"rounded shadow"},{default:e(()=>[s(t(T),{class:"w-[180px]"},{default:e(()=>[s(t(j))]),_:1}),s(t(B),null,{default:e(()=>[s(t(f),{value:"name"},{default:e(()=>a[5]||(a[5]=[i("Tên khuyến mãi")])),_:1,__:[5]}),s(t(f),{value:"code"},{default:e(()=>a[6]||(a[6]=[i("Mã khuyến mãi")])),_:1,__:[6]}),s(t(f),{value:"start_date"},{default:e(()=>a[7]||(a[7]=[i("Ngày bắt đầu")])),_:1,__:[7]}),s(t(f),{value:"end_date"},{default:e(()=>a[8]||(a[8]=[i("Ngày kết thúc")])),_:1,__:[8]})]),_:1})]),_:1},8,["modelValue"]),s(t(N),{modelValue:x.value,"onUpdate:modelValue":a[1]||(a[1]=d=>x.value=d),class:"rounded shadow"},{default:e(()=>[s(t(T),{class:"w-[140px]"},{default:e(()=>[s(t(j))]),_:1}),s(t(B),null,{default:e(()=>[s(t(f),{value:"asc"},{default:e(()=>a[9]||(a[9]=[i("Tăng dần")])),_:1,__:[9]}),s(t(f),{value:"desc"},{default:e(()=>a[10]||(a[10]=[i("Giảm dần")])),_:1,__:[10]})]),_:1})]),_:1},8,["modelValue"]),s(t(c),{onClick:M},{default:e(()=>a[11]||(a[11]=[i(" Áp dụng ")])),_:1,__:[11]})])]),l("div",tt,[s(t(I),null,{default:e(()=>[s(t(L),{class:"text-primary"},{default:e(()=>[s(t(v),null,{default:e(()=>[s(t(o),{class:"text-primary w-[15%] font-bold"},{default:e(()=>a[12]||(a[12]=[l("div",{class:"px-3 py-4"},"Mã",-1)])),_:1,__:[12]}),s(t(o),{class:"text-primary w-[25%] font-bold"},{default:e(()=>a[13]||(a[13]=[l("div",{class:"px-3 py-4"},"Tên",-1)])),_:1,__:[13]}),s(t(o),{class:"text-primary w-[15%] font-bold"},{default:e(()=>a[14]||(a[14]=[l("div",{class:"px-3 py-4"},"Loại",-1)])),_:1,__:[14]}),s(t(o),{class:"text-primary w-[15%] font-bold"},{default:e(()=>a[15]||(a[15]=[l("div",{class:"px-3 py-4"},"Giá trị",-1)])),_:1,__:[15]}),s(t(o),{class:"text-primary w-[15%] font-bold"},{default:e(()=>a[16]||(a[16]=[l("div",{class:"px-3 py-4"},"Thời gian",-1)])),_:1,__:[16]}),s(t(o),{class:"text-primary w-[10%] font-bold"},{default:e(()=>a[17]||(a[17]=[l("div",{class:"px-3 py-4"},"Trạng thái",-1)])),_:1,__:[17]}),s(t(o),{class:"text-primary w-[5%] text-right font-bold"},{default:e(()=>a[18]||(a[18]=[l("div",{class:"px-3 py-4"},"Hành động",-1)])),_:1,__:[18]})]),_:1})]),_:1}),s(t(K),null,{default:e(()=>[m.promotions.data.length===0?(u(),b(t(v),{key:0},{default:e(()=>[s(t(r),{colspan:"7"},{default:e(()=>a[19]||(a[19]=[l("div",{class:"px-3 py-4 text-center text-gray-500"},"Không tìm thấy khuyến mãi nào.",-1)])),_:1,__:[19]})]),_:1})):(u(!0),U(W,{key:1},q(m.promotions.data,d=>(u(),b(t(v),{key:d.id,class:"hover:bg-muted/30"},{default:e(()=>[s(t(r),{class:"font-medium"},{default:e(()=>[l("div",et,_(d.code),1)]),_:2},1024),s(t(r),null,{default:e(()=>[l("div",st,_(d.name),1)]),_:2},1024),s(t(r),null,{default:e(()=>[l("div",at,[s(t(y),{variant:"outline",class:"border-blue-200 bg-blue-50 px-3 py-1 text-xs font-bold text-blue-600"},{default:e(()=>[i(_(d.type==="percentage"?"Phần trăm":"Số tiền cố định"),1)]),_:2},1024)])]),_:2},1024),s(t(r),null,{default:e(()=>[l("div",lt,[s(t(y),{variant:"outline",class:"border-green-200 bg-green-50 px-3 py-1 text-xs font-bold text-green-600"},{default:e(()=>[i(_(d.type==="percentage"?`${d.value}%`:`${D(d.value)}đ`),1)]),_:2},1024)])]),_:2},1024),s(t(r),null,{default:e(()=>[l("div",dt,[l("div",it,_($(d.start_date)),1),a[20]||(a[20]=l("div",{class:"text-sm text-gray-500"},"đến",-1)),l("div",nt,_($(d.end_date)),1)])]),_:2},1024),s(t(r),null,{default:e(()=>[l("div",rt,[s(t(y),{variant:d.is_active?"default":"secondary",class:H([d.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},{default:e(()=>[i(_(d.is_active?"Đang hoạt động":"Đã tắt"),1)]),_:2},1032,["variant","class"])])]),_:2},1024),s(t(r),{class:"text-right"},{default:e(()=>[l("div",ot,[s(t(E),null,{default:e(()=>[s(t(z),{"as-child":""},{default:e(()=>[s(t(c),{variant:"ghost",size:"icon"},{default:e(()=>[s(t(A),{class:"h-4 w-4"})]),_:1})]),_:1}),s(t(G),{align:"end"},{default:e(()=>[s(t(V),null,{default:e(()=>[s(t(h),{href:n.route("admin.promotions.edit",d.id)},{default:e(()=>a[21]||(a[21]=[i(" Chỉnh sửa ")])),_:2,__:[21]},1032,["href"])]),_:2},1024),s(t(V),{onClick:_t=>F(d),class:"text-red-500"},{default:e(()=>a[22]||(a[22]=[i(" Xóa ")])),_:2,__:[22]},1032,["onClick"])]),_:2},1024)]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),_:1}))}});export{Kt as default};
